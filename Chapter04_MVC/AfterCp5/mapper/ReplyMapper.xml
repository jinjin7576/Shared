<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.joonzis.mapper.ReplyMapper">
<!-- 댓글 목록은 내림차순 -->
<select id="getList" parameterType="int" resultType="org.joonzis.domain.ReplyVO">
	SELECT * FROM tbl_reply WHERE bno=#{bno} ORDER BY rno
</select>

<select id="read" parameterType="int" resultType="org.joonzis.domain.ReplyVO">
	SELECT * FROM tbl_reply WHERE rno=#{rno}
</select>

<insert id="insert" parameterType="org.joonzis.domain.ReplyVO">
	INSERT INTO tbl_reply(
		rno,
		bno,
		reply,
		replyer
	)
	VALUES(
		seq_reply.nextval,
		#{bno},
		#{reply},
		#{replyer}
	)
</insert>

<delete id="delete" parameterType="int">
	DELETE FROM tbl_reply WHERE rno=#{rno}
</delete>

<!-- 댓글 내용, 수정 날짜만 변경되고 수정 조건은 댓글번호 -->
<update id="update" parameterType="org.joonzis.domain.ReplyVO">
		UPDATE 
			tbl_reply
		SET 
			reply=#{reply},
		 	updatedate=sysdate
		WHERE 
			rno=#{rno}
</update>
</mapper>
